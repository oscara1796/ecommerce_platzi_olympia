

-Crear una nueva tabla para los payment methods del ususario con sus respectivos endpoints
	*Eliminar los payment methods
	*agregar mas payment method o sea mas tarjetas
	*traer todos los payment methods
	*añadir un campo booleano al payment method para poner como default 
	*crear view para cambiar de default el payment method
*****TERMINADO

-las direcciones registradas a un cliente
	*pasar como foreign key el usuario a shipping address
	*hacer view para traer todas las direcciones  activas registradas a un cliente
	*hacer view para añadir dirección de envio 
	*hacer view para cambiar dirección default 
	*añadir un campo booleano a la dirección para poner como default 
	*añadir campo booleano para ver si esta activada
	*hacer view para deactivar dirección de envio 

-hacer signal por si cambia una dirección o payment method default a true los demas se ponen como desactivados 


-Stripe con orderview
*Checar si el usuario esta logeado
	Si no esta
		*corroborar si pago con paypal o con stripe
			Pago con stripe
				*Crear un payment method 
				*sacar geolocalisacion de su ip
				*sacar con currency con localización 
				*hacer la conversion  de mxn a  la conversion
				*adjuntar payment method al payment intent y al paymentn intent adjuntar conversion y currency
				*Adjuntar a la orden  el payment intent
			Pago con paypal
				*crear orden normal
	Si si esta
		*corroborar si pago con stripe o con paypal
			Pago con stripe	
				*Checar si el usuario tiene payment method
					Si si tiene
						*Checar que payment method va a usar  con el default
						*sacar geolocalisacion de su ip
						*sacar con currency con localización 
						*hacer la conversion  de mxn a  la conversion
						*adjuntar payment method al payment intent y al paymentn intent adjuntar conversion y currency
						*adjuntar al payment intent
						*adjuntar a la orden
					Si no tiene
						*Crear un payment method 
						*guardarlo en  nuestra tabla de payment methods y ponerlo como default
						*adjuntar al customer de stripe
						*sacar geolocalisacion de su ip
						*sacar con currency con localización 
						*hacer la conversion  de mxn a  la conversion
						*adjuntar payment method al payment intent y al paymentn intent adjuntar conversion y currency
						*Adjuntar a la orden el payment intent
			
			Pago con paypal
				*crear orden normal
		*corroborar si el ususario cuenta con dirección default
			adjuntar dirección a la orden 
		*si no tiene dirección
			crear una dirección de envio guardarla y hacerla default

-Cliente le dio pagar:
	Si la orden tiene payment_method stripe:
		*traer el objeto payment intent
		*darle true  para pasar al pago
		*darle al valor is paid = True
		*y adjuntar la hora del pago
	Si la orden tiene paypal
		*cuando se haga el evento de pagada se hace is paid true
		*y se djunta hora

-hacer view de traer las ordenes  no pagadas de tal cliente

		
				
	
